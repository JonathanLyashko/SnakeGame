!function(){function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}var t=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire8075,n=t.register;n("ggUaI",function(e,n){var r=t("j5jZ2"),o=t("e7ruY");(0,r.default)().then(e=>{let t=window.innerHeight/25,n=(0,o.rnd)(100),i=(0,r.World).new(10,n),a=i.width(),s=document.getElementById("points"),_=document.getElementById("game-status"),l=document.getElementById("game-control-btn"),d=document.getElementById("snake-canvas"),u=d.getContext("2d");function c(){(function(){u.beginPath();for(let e=0;e<a+1;e++)u.moveTo(t*e,0),u.lineTo(t*e,a*t);for(let e=0;e<a+1;e++)u.moveTo(0,t*e),u.lineTo(a*t,t*e);u.stroke()})(),function(){let n=new Uint32Array(e.memory.buffer,i.snake_cells(),i.snake_length());n.filter((e,t)=>!(t>0&&e===n[0])).forEach((e,n)=>{u.fillStyle=0===n?"#7878db":"#000000",u.beginPath(),u.fillRect(e%a*t,Math.floor(e/a)*t,t,t)}),u.stroke()}(),function(){let e=i.reward_cell();u.beginPath(),u.fillStyle="#FF0000",u.fillRect(e%a*t,Math.floor(e/a)*t,t,t),u.stroke()}(),_.textContent=i.game_status_text(),s.textContent=i.points().toString()}d.height=a*t,d.width=a*t,l.addEventListener("click",e=>{void 0==i.game_status()?(l.textContent="Restart",i.start_game(),function e(){let t=i.game_status();if(t==r.GameStatus.Won||t==r.GameStatus.Lost){l.textContent="Replay";return}setTimeout(()=>{u.clearRect(0,0,d.width,d.height),i.step(),c(),requestAnimationFrame(e)},125)}()):location.reload()}),document.addEventListener("keydown",e=>{switch(e.code){case"ArrowUp":i.change_snake_dir(r.Direction.Up);break;case"ArrowRight":i.change_snake_dir(r.Direction.Right);break;case"ArrowDown":i.change_snake_dir(r.Direction.Down);break;case"ArrowLeft":i.change_snake_dir(r.Direction.Left)}}),c()})}),n("j5jZ2",function(n,r){let o;e(n.exports,"GameStatus",function(){return u}),e(n.exports,"Direction",function(){return c}),e(n.exports,"World",function(){return w}),e(n.exports,"default",function(){return h});var i=t("lJtg6");let a="undefined"!=typeof TextDecoder?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};"undefined"!=typeof TextDecoder&&a.decode();let s=null;function _(e,t){return e>>>=0,a.decode(((null===s||0===s.byteLength)&&(s=new Uint8Array(o.memory.buffer)),s).subarray(e,e+t))}let l=null;function d(){return(null===l||0===l.byteLength)&&(l=new Int32Array(o.memory.buffer)),l}let u=Object.freeze({Won:0,0:"Won",Lost:1,1:"Lost",Played:2,2:"Played"}),c=Object.freeze({Up:0,0:"Up",Right:1,1:"Right",Down:2,2:"Down",Left:3,3:"Left"}),f="undefined"==typeof FinalizationRegistry?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>o.__wbg_world_free(e>>>0));class w{static __wrap(e){e>>>=0;let t=Object.create(w.prototype);return t.__wbg_ptr=e,f.register(t,t.__wbg_ptr,t),t}__destroy_into_raw(){let e=this.__wbg_ptr;return this.__wbg_ptr=0,f.unregister(this),e}free(){let e=this.__destroy_into_raw();o.__wbg_world_free(e)}static new(e,t){let n=o.world_new(e,t);return w.__wrap(n)}width(){return o.world_width(this.__wbg_ptr)>>>0}points(){return o.world_points(this.__wbg_ptr)>>>0}reward_cell(){try{let n=o.__wbindgen_add_to_stack_pointer(-16);o.world_reward_cell(n,this.__wbg_ptr);var e=d()[n/4+0],t=d()[n/4+1];return 0===e?void 0:t>>>0}finally{o.__wbindgen_add_to_stack_pointer(16)}}snake_head_idx(){return o.world_snake_head_idx(this.__wbg_ptr)>>>0}start_game(){o.world_start_game(this.__wbg_ptr)}game_status(){let e=o.world_game_status(this.__wbg_ptr);return 3===e?void 0:e}game_status_text(){let e,t;try{let i=o.__wbindgen_add_to_stack_pointer(-16);o.world_game_status_text(i,this.__wbg_ptr);var n=d()[i/4+0],r=d()[i/4+1];return e=n,t=r,_(n,r)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(e,t,1)}}change_snake_dir(e){o.world_change_snake_dir(this.__wbg_ptr,e)}snake_length(){return o.world_snake_length(this.__wbg_ptr)>>>0}snake_cells(){return o.world_snake_cells(this.__wbg_ptr)>>>0}step(){o.world_step(this.__wbg_ptr)}}async function g(e,t){if("function"==typeof Response&&e instanceof Response){if("function"==typeof WebAssembly.instantiateStreaming)try{return await WebAssembly.instantiateStreaming(e,t)}catch(t){if("application/wasm"!=e.headers.get("Content-Type"))console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",t);else throw t}let n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}{let n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}async function b(e){if(void 0!==o)return o;void 0===e&&(e=new URL(t("3aMDe")));let n=function(){let e={};return e.wbg={},e.wbg.__wbg_rnd_1f1903d658d226dd=function(e){return(0,i.rnd)(e>>>0)},e.wbg.__wbindgen_throw=function(e,t){throw Error(_(e,t))},e}();("string"==typeof e||"function"==typeof Request&&e instanceof Request||"function"==typeof URL&&e instanceof URL)&&(e=fetch(e));let{instance:r,module:a}=await g(await e,n);return o=r.exports,b.__wbindgen_wasm_module=a,l=null,s=null,o}var h=b}),n("lJtg6",function(t,n){e(t.exports,"rnd",function(){return r});function r(e){return Math.floor(Math.random()*e)}}),n("3aMDe",function(e,n){e.exports=t("5waPY").getBundleURL("k3duZ")+"snake_game_bg.47c2c59e.wasm"}),n("5waPY",function(t,n){e(t.exports,"getBundleURL",function(){return r},function(e){return r=e});var r,o={};r=function(e){var t=o[e];return t||(t=function(){try{throw Error()}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return(""+e[2]).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}return"/"}(),o[e]=t),t}}),n("e7ruY",function(t,n){e(t.exports,"rnd",function(){return r});function r(e){return Math.floor(Math.random()*e)}})}();
//# sourceMappingURL=snake_deploy.9b729788.js.map
